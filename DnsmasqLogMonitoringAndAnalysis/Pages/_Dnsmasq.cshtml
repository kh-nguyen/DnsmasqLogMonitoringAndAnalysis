<div class="content-wrapper container-fluid dnsmasq">
    <h3>
        Dnsmasq Log Real-Time Monitoring And Analysis
        <mark ng-if="dnsmasq.dataOptions.pause"> pausing...</mark>
        <span class="pull-right">
            <a ng-click="dnsmasq.dataOptions.pause = !dnsmasq.dataOptions.pause"><span class="glyphicon" ng-class="dnsmasq.dataOptions.pause ? 'glyphicon-play' : 'glyphicon-pause'" aria-hidden="true"></span></a>
            <a ng-click="dnsmasq.dataOptions.settings = !dnsmasq.dataOptions.settings"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></a>
            <span title="Start time" class="glyphicon glyphicon-time" aria-hidden="true"></span>: <small><span title="{{dnsmasq.startTime}}" am-time-ago="dnsmasq.startTime"></span></small>
        </span>
    </h3>

    <div class="row" ng-if="dnsmasq.dataOptions.settings">
        <div class="col-xs-12">
            <fieldset>
                <legend><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Settings</legend>
                <div class="col-xs-12 col-md-6">
                    <table class="table table-condensed table-bordered">
                        <caption>Ignored Nodes</caption>
                        <thead>
                            <tr class="info"><th>IP Address</th></tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="node in dnsmasq.ignores">
                                <td ng-bind="node"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-xs-12 col-md-6">
                    <div>Local Domain Name: <input ng-model="DomainName" /></div>
                    <div>IP Address Resolver Url: <input ng-model="HostnameResolveUrl" /></div>
                    <div title="Usefully to keep only main domains (www.website.com or website.com) instead of the ones automatically visited by a program on the client's device">Keep bare or WWW domains only: <input type="checkbox" ng-model="dnsmasq.filteredDomainsOptions.bare_or_www_only" /></div>
                </div>
            </fieldset>
        </div>

        <div class="clearfix"></div>

        <hr />
    </div>

    <div class="row">
        <div class="col-xs-12" ng-show="OldDataLoadedCount != OldDataCount">
            <h6>Loading <span ng-bind="OldDataLoadedCount"></span> of <span ng-bind="OldDataCount"></span> lines...</h6>
        </div>

        <div class="col-xs-12">
            <div class="row">
                <div class="col-xs-12">
                    <table class="table table-condensed table-bordered">
                        <caption>
                            <span toggle-hidden options="dnsmasq.domainsOptions.expand"></span>
                            Domains: <span ng-bind="dnsmasq.domains.length | number"></span>
                            <span class="pull-right">
                                <a title="Expand All" ng-click="dnsmasq.domainsOptions.expand.all = !dnsmasq.domainsOptions.expand.all; dnsmasq.setHidden(dnsmasq.domains, !dnsmasq.domainsOptions.expand.all)"><span class="glyphicon" ng-class="dnsmasq.domainsOptions.expand.all ? 'glyphicon-minus' : 'glyphicon-plus'" aria-hidden="true"></span></a>
                                <a ng-click="dnsmasq.domainsOptions.searchShow = !dnsmasq.domainsOptions.searchShow" title="Search"><span class="glyphicon glyphicon glyphicon-search" aria-hidden="true"></span></a>
                                <input placeholder="search" ng-show="dnsmasq.domainsOptions.searchShow" ng-model="dnsmasq.domainsOptions.search" />
                            </span>
                        </caption>
                        <thead ng-if="!dnsmasq.domainsOptions.expand.hidden">
                            <tr class="info">
                                <th sort-direction options="dnsmasq.domainsOptions.expand.sort" order-by="key" title="Top Domains"></th>
                                <th sort-direction options="dnsmasq.domainsOptions.expand.sort" order-by="categories" title="Categories"></th>
                                <th sort-direction options="dnsmasq.domainsOptions.expand.sort" order-by="requestors" title="Requestors"></th>
                                <th sort-direction options="dnsmasq.domainsOptions.expand.sort" order-by="totalRequests" title="Requests"></th>
                                <th sort-direction options="dnsmasq.domainsOptions.expand.sort" order-by="lastRequestTime" title="Last Time"></th>
                            </tr>
                        </thead>
                        <tbody ng-if="!dnsmasq.domainsOptions.expand.hidden">
                            <tr ng-repeat-start="domain in dnsmasq.domains | filter:dnsmasq.domainsOptions.search | orderBy:dnsmasq.domainsOptions.expand.sort.orderBy:dnsmasq.domainsOptions.expand.sort.orderReverse | limitTo: dnsmasq.domainsOptions.expand.limit" class="animate-row">
                                <td>
                                    <span toggle-hidden options="domain.expand"></span>
                                    <span ng-bind="domain.key"></span>
                                </td>
                                <td>
                                    <ul class="list-inline" ng-repeat="category in domain.categories">
                                        <li ng-class="dnsmasq.categoriesOptions.getClasses(category)" ng-bind="category"></li>
                                    </ul>
                                </td>
                                <td><span ng-bind="domain.requestors.length | number"></span></td>
                                <td><span ng-bind="domain.totalRequests | number" class="update-item value-{{domain.totalRequests}}"></span></td>
                                <td><span ng-bind="domain.lastRequestor.hostname ? domain.lastRequestor.hostname : domain.lastRequestor.key"></span>: <span title="{{domain.lastRequestTime}}" am-time-ago="domain.lastRequestTime"></span></td>
                            </tr>
                            <tr ng-repeat-end ng-if="!domain.expand.hidden">
                                <td colspan="5">
                                    <div domains-template domains="domain" dnsmasq="dnsmasq"></div>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot ng-if="!dnsmasq.domainsOptions.expand.hidden">
                            <tr>
                                <td colspan="5">
                                    <div table-options-template records="dnsmasq.domains" options="dnsmasq.domainsOptions" dnsmasq="dnsmasq"></div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="col-xs-12 col-md-6">
                    <table class="table table-condensed table-bordered">
                        <caption>
                            <span toggle-hidden options="dnsmasq.resolversOptions.expand"></span>
                            Resolvers: <span ng-bind="dnsmasq.resolvers | keylength | number"></span>
                            <span class="pull-right">
                                <a ng-click="dnsmasq.resolversOptions.searchShow = !dnsmasq.resolversOptions.searchShow" title="Search"><span class="glyphicon glyphicon glyphicon-search" aria-hidden="true"></span></a>
                                <input placeholder="search" ng-show="dnsmasq.resolversOptions.searchShow" ng-model="dnsmasq.resolversOptions.search" />
                            </span>
                        </caption>
                        <thead ng-if="!dnsmasq.resolversOptions.expand.hidden">
                            <tr class="info">
                                <th sort-direction options="dnsmasq.resolversOptions.expand.sort" order-by="key" title="Resolver"></th>
                                <th colspan="2" sort-direction options="dnsmasq.resolversOptions.expand.sort" order-by="totalRequests" title="Requests"></th>
                            </tr>
                        </thead>
                        <tbody ng-if="!dnsmasq.resolversOptions.expand.hidden">
                            <tr ng-repeat="resolver in dnsmasq.resolvers | filter:dnsmasq.resolversOptions.search | orderBy:dnsmasq.resolversOptions.expand.sort.orderBy:dnsmasq.resolversOptions.expand.sort.orderReverse" class="animate-row">
                                <td><span ng-bind="resolver.key"></span><span ng-if="resolver.key != resolver.hostname">&nbsp;<span ng-bind="resolver.hostname"></span></span></td>
                                <td><span ng-bind="resolver.totalRequests | number" class="update-item value-{{resolver.totalRequests}}"></span></td>
                                <td><span ng-bind="(resolver.totalRequests / dnsmasq.resolversOptions.sum.totalRequests) * 100 | number:2"></span>%</td>
                            </tr>
                        </tbody>
                        <tfoot ng-if="!dnsmasq.resolversOptions.expand.hidden">
                            <tr>
                                <td align="right">Total:</td>
                                <td colspan="2"><span ng-bind="dnsmasq.resolversOptions.sum.totalRequests | number" class="update-item value-{{dnsmasq.resolversOptions.sum.totalRequests}}"></span></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="col-xs-12 col-md-6">
                    <table class="table table-condensed table-bordered">
                        <caption>
                            <span toggle-hidden options="dnsmasq.categoriesOptions.expand"></span>
                            Categories: <span ng-bind="dnsmasq.categories | keylength | number"></span>
                        </caption>
                        <thead ng-if="!dnsmasq.categoriesOptions.expand.hidden">
                            <tr class="info">
                                <th sort-direction options="dnsmasq.categoriesOptions.expand.sort" order-by="name" title="Name"></th>
                                <th sort-direction options="dnsmasq.categoriesOptions.expand.sort" order-by="data | keylength" title="DB Count"></th>
                                <th sort-direction options="dnsmasq.categoriesOptions.expand.sort" order-by="matches" title="Matched"></th>
                            </tr>
                        </thead>
                        <tbody ng-if="!dnsmasq.categoriesOptions.expand.hidden">
                            <tr ng-repeat-start="category in dnsmasq.categories | orderBy:dnsmasq.categoriesOptions.expand.sort.orderBy:dnsmasq.categoriesOptions.expand.sort.orderReverse">
                                <td>
                                    <span toggle-hidden options="category.expand"></span>
                                    <span ng-class="dnsmasq.categoriesOptions.getClasses(category.name)" ng-bind="category.name"></span>
                                </td>
                                <td ng-bind="category.data | keylength | number"></td>
                                <td><span ng-bind="category.matches | number" class="update-item value-{{category.matches}}"></span></td>
                            </tr>
                            <tr ng-repeat-end ng-if="!category.expand.hidden">
                                <td colspan="3">
                                    <table class="table table-condensed table-bordered">
                                        <thead>
                                            <tr class="info">
                                                <th sort-direction options="category.expand.sort" order-by="key" title="Name"></th>
                                                <th sort-direction options="category.expand.sort" order-by="records.length" title="Matched"></th>
                                                <th sort-direction options="category.expand.sort" order-by="lastRequestTime" title="Last Time"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat-start="topdomain in category.records | orderBy:category.expand.sort.orderBy:category.expand.sort.orderReverse | limitTo: category.expand.limit">
                                                <td>
                                                    <span toggle-hidden options="topdomain.expand"></span>
                                                    <span ng-bind="topdomain.key"></span>
                                                </td>
                                                <td><span ng-bind="topdomain.records.length | number" class="update-item value-{{topdomain.records.length}}"></span></td>
                                                <td title="{{topdomain.lastRequestTime}}" am-time-ago="topdomain.lastRequestTime"></td>
                                            </tr>
                                            <tr ng-repeat-end ng-if="!topdomain.expand.hidden">
                                                <td colspan="3"><div domains-template domains="topdomain" dnsmasq="dnsmasq"></div></td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3">
                                                    <div table-options-template records="category.records" options="category" dnsmasq="dnsmasq"></div>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12">
                    <table class="table table-condensed table-bordered">
                        <caption>
                            <span toggle-hidden options="dnsmasq.queriesOptions.expand"></span>
                            Clients: <span ng-bind="dnsmasq.queries | keylength | number"></span>
                            <span class="pull-right">
                                <a title="Expand All" ng-click="dnsmasq.queriesOptions.expand.all = !dnsmasq.queriesOptions.expand.all; dnsmasq.setHidden(dnsmasq.queries, !dnsmasq.queriesOptions.expand.all)"><span class="glyphicon" ng-class="dnsmasq.queriesOptions.expand.all ? 'glyphicon-minus' : 'glyphicon-plus'" aria-hidden="true"></span></a>
                                <a ng-click="dnsmasq.queriesOptions.searchShow = !dnsmasq.queriesOptions.searchShow" title="Search"><span class="glyphicon glyphicon glyphicon-search" aria-hidden="true"></span></a>
                                <input placeholder="search" ng-show="dnsmasq.queriesOptions.searchShow" ng-model="dnsmasq.queriesOptions.search" />
                            </span>
                        </caption>
                        <thead ng-if="!dnsmasq.queriesOptions.expand.hidden">
                            <tr class="info">
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="hostname" title="Node"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="key" title="IP Address"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="categories" title="Categories"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="totalTopDomains" title="Top Domains"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="totalDomains" title="Sub Domains"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="totalRequests" title="Requests"></th>
                                <th sort-direction options="dnsmasq.queriesOptions.expand.sort" order-by="lastRequestTime" title="Last Time"></th>
                            </tr>
                        </thead>
                        <tbody ng-if="!dnsmasq.queriesOptions.expand.hidden">
                            <tr ng-repeat-start="node in dnsmasq.queries | filter:dnsmasq.queriesOptions.search | orderBy:dnsmasq.queriesOptions.expand.sort.orderBy:dnsmasq.queriesOptions.expand.sort.orderReverse | limitTo: dnsmasq.queriesOptions.expand.limit" class="animate-row">
                                <td>
                                    <span toggle-hidden options="node.expand"></span>
                                    <span ng-bind="node.hostname ? node.hostname : node.key"></span>
                                </td>
                                <td ng-bind="node.key"></td>
                                <td>
                                    <ul class="list-inline" ng-repeat="category in node.categories">
                                        <li ng-class="dnsmasq.categoriesOptions.getClasses(category)" ng-bind="category"></li>
                                    </ul>
                                </td>
                                <td><span ng-bind="node.totalTopDomains | number" class="update-item value-{{node.totalTopDomains}}"></span></td>
                                <td><span ng-bind="node.totalDomains | number" class="update-item value-{{node.totalDomains}}"></span></td>
                                <td><span ng-bind="node.totalRequests | number" class="update-item value-{{node.totalRequests}}"></span></td>
                                <td title="{{node.lastRequestTime}}" am-time-ago="node.lastRequestTime"></td>
                            </tr>
                            <tr ng-repeat-end ng-if="!node.expand.hidden">
                                <td colspan="7">
                                    <table class="table table-condensed table-bordered">
                                        <thead>
                                            <tr class="warning">
                                                <th sort-direction options="node" order-by="key" title="Top Domains"></th>
                                                <th sort-direction options="node" order-by="categories" title="Categories"></th>
                                                <th sort-direction options="node" order-by="totalDomains" title="Sub Domains"></th>
                                                <th sort-direction options="node" order-by="totalRequests" title="Requests"></th>
                                                <th sort-direction options="node" order-by="lastRequestTime" title="Last Time"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat-start="topdomain in node.records | filter:dnsmasq.queriesOptions.search | orderBy:node.orderBy:node.orderReverse" class="animate-row">
                                                <td>
                                                    <span toggle-hidden options="topdomain.expand"></span>
                                                    <span ng-bind="topdomain.key"></span>
                                                </td>
                                                <td>
                                                    <ul class="list-inline" ng-repeat="category in topdomain.categories">
                                                        <li ng-class="category != 'adware' ? 'text-warning' : ''" ng-bind="category"></li>
                                                    </ul>
                                                </td>
                                                <td><span ng-bind="topdomain.totalDomains | number" class="update-item value-{{topdomain.totalDomains}}"></span></td>
                                                <td><span ng-bind="topdomain.totalRequests | number" class="update-item value-{{topdomain.totalRequests}}"></span></td>
                                                <td title="{{topdomain.lastRequestTime}}" am-time-ago="topdomain.lastRequestTime"></td>
                                            </tr>
                                            <tr ng-repeat-end ng-if="!topdomain.expand.hidden">
                                                <td colspan="5">
                                                    <table class="table table-condensed">
                                                        <thead>
                                                            <tr>
                                                                <th sort-direction options="topdomain" order-by="domain" title="Domain"></th>
                                                                <th sort-direction options="topdomain" order-by="ipaddress" title="IP Address"></th>
                                                                <th sort-direction options="topdomain" order-by="resolver" title="Resolver"></th>
                                                                <th sort-direction options="topdomain" order-by="category" title="Category"></th>
                                                                <th sort-direction options="topdomain" order-by="totalRequests" title="Count"></th>
                                                                <th sort-direction options="topdomain" order-by="time" title="Last Time"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr class="animate-row"
                                                                ng-repeat="query in topdomain.records | orderBy:topdomain.orderBy:topdomain.orderReverse"
                                                                ng-class=" dnsmasq.isNonRoutableRequest(query) ? 'text-muted' : (query.resolver == 'cached' ? 'text-success' : '')">
                                                                <td ng-bind="query.domain"></td>
                                                                <td ng-bind="query.ipaddress"></td>
                                                                <td ng-bind="query.resolver"></td>
                                                                <td ng-bind="query.category"></td>
                                                                <td><span ng-bind="query.totalRequests" class="update-item value-{{query.totalRequests}}"></span></td>
                                                                <td title="{{query.time}}" am-time-ago="query.time"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot ng-if="!dnsmasq.queriesOptions.expand.hidden">
                            <tr>
                                <td colspan="7">
                                    <div table-options-template records="dnsmasq.queries" options="dnsmasq.queriesOptions" dnsmasq="dnsmasq"></div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-xs-12">
            <table class="table table-condensed table-bordered">
                <caption>
                    <span toggle-hidden options="dnsmasq.dataOptions.expand"></span>
                    Raw Data:
                    <span ng-bind="dnsmasq.dataOptions.count | number" title="Total number of processed lines"></span>
                    <span class="pull-right">
                        <a ng-click="dnsmasq.dataOptions.chart.show = !dnsmasq.dataOptions.chart.show" title="Chart"><span class="glyphicon glyphicon glyphicon-signal" aria-hidden="true"></span></a>
                        <span ng-if="dnsmasq.dataOptions.chart.show">
                            Duration:
                            <select ng-change="dnsmasq.dataOptions.chart.element.update({ duration: 0 })"
                                    ng-model="dnsmasq.dataOptions.chart.element.options.scales.xAxes[0].realtime.duration">
                                <option ng-repeat="duration in dnsmasq.dataOptions.chart.durations" value="{{duration.value}}" ng-bind="duration.name"></option>
                            </select>
                        </span>
                        <a ng-click="dnsmasq.dataOptions.searchShow = !dnsmasq.dataOptions.searchShow" title="Search"><span class="glyphicon glyphicon glyphicon-search" aria-hidden="true"></span></a>
                        <input placeholder="search" ng-if="dnsmasq.dataOptions.searchShow" ng-model="dnsmasq.dataOptions.search" />
                        Limit:
                        <select ng-options="limit for limit in dnsmasq.limits"
                                ng-model="dnsmasq.dataOptions.expand.limit"
                                ng-change="dnsmasq.dataOptions.applyLimit()"
                                title="Raw data storage size limit"></select>
                    </span>
                    <canvas real-time-data-chart ng-if="dnsmasq.dataOptions.chart.show" style="width: 800px; height: 200px"></canvas>
                </caption>
                <thead ng-if="!dnsmasq.dataOptions.expand.hidden">
                    <tr class="info">
                        <th sort-direction options="dnsmasq.dataOptions.expand.sort" order-by="time" title="Time"></th>
                        <th sort-direction options="dnsmasq.dataOptions.expand.sort" order-by="logger" title="Logger">Logger</th>
                        <th colspan="4">Message</th>
                    </tr>
                </thead>
                <tbody ng-if="!dnsmasq.dataOptions.expand.hidden">
                    <tr ng-repeat="row in dnsmasq.data | filter:dnsmasq.dataOptions.search | orderBy:dnsmasq.dataOptions.expand.sort.orderBy:dnsmasq.dataOptions.expand.sort.orderReverse" class="animate-row">
                        <td title="{{row.time}}" am-time-ago="row.time"></td>
                        <td ng-bind="row.logger"></td>
                        <td ng-bind="row.messageSplits.length == 4 ? row.messageSplits[0] : row.message" colspan="{{row.messageSplits.length == 4 ? 0 : 4}}"></td>
                        <td ng-bind="row.messageSplits[1]" ng-if="row.messageSplits.length == 4"></td>
                        <td ng-bind="row.messageSplits[2]" ng-if="row.messageSplits.length == 4"></td>
                        <td ng-bind="row.messageSplits[3]" ng-if="row.messageSplits.length == 4"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="dnsmasq-domains-template" class="hidden ng-non-bindable">
    <table class="table table-condensed table-bordered">
        <thead>
            <tr class="warning">
                <th sort-direction options="domains.expand.sort" order-by="key" title="Domain"></th>
                <th sort-direction options="domains.expand.sort" order-by="totalRequestors" title="Requestors"></th>
                <th sort-direction options="domains.expand.sort" order-by="totalRequests" title="Requests"></th>
                <th sort-direction options="domains.expand.sort" order-by="lastRequestTime" title="Last Time"></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat-start="domain in domains.records | orderBy:domains.expand.sort.orderBy:domains.expand.sort.orderReverse | limitTo: domains.expand.limit" class="animate-row">
                <td>
                    <span toggle-hidden options="domain.expand"></span>
                    <span ng-bind="domain.key"></span>
                </td>
                <td><span ng-bind="domain.totalRequestors | number" class="update-item value-{{domain.totalRequestors}}"></span></td>
                <td><span ng-bind="domain.totalRequests | number" class="update-item value-{{domain.totalRequests}}"></span></td>
                <td title="{{domain.lastRequestTime}}" am-time-ago="domain.lastRequestTime"></td>
            </tr>
            <tr ng-repeat-end ng-if="!domain.expand.hidden">
                <td colspan="4">
                    <table class="table table-condensed table-bordered">
                        <thead>
                            <tr>
                                <th sort-direction options="domain.expand.sort" order-by="key" title="Requestor"></th>
                                <th sort-direction options="domain.expand.sort" order-by="totalRequests" title="Requests"></th>
                                <th sort-direction options="domain.expand.sort" order-by="lastRequestTime" title="Last Time"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat-start="requestor in domain.records | orderBy:domain.expand.sort.orderBy:domain.expand.sort.orderReverse">
                                <td>
                                    <span toggle-hidden options="requestor.expand"></span>
                                    <span ng-bind="requestor.hostname ? requestor.hostname : requestor.key" title="IP Address: {{requestor.key}}"></span>
                                </td>
                                <td><span ng-bind="requestor.totalRequests | number" class="update-item value-{{requestor.totalRequests}}"></span></td>
                                <td title="{{requestor.lastRequestTime}}" am-time-ago="requestor.lastRequestTime"></td>
                            </tr>
                            <tr ng-repeat-end ng-if="!requestor.expand.hidden">
                                <td colspan="4">
                                    <table class="table table-condensed table-bordered">
                                        <thead>
                                            <tr>
                                                <th sort-direction options="requestor.expand.sort" order-by="domain" title="Domain"></th>
                                                <th sort-direction options="requestor.expand.sort" order-by="ipaddress" title="IP Address"></th>
                                                <th sort-direction options="requestor.expand.sort" order-by="resolver" title="Resolver"></th>
                                                <th sort-direction options="requestor.expand.sort" order-by="time" title="Time"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="query in requestor.records | orderBy:requestor.expand.sort.orderBy:requestor.expand.sort.orderReverse">
                                                <td ng-bind="query.domain"></td>
                                                <td ng-bind="query.ipaddress"></td>
                                                <td ng-bind="query.resolver"></td>
                                                <td title="{{query.time}}" am-time-ago="query.time"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4">
                    <div table-options-template records="domains.records" options="domains" dnsmasq="dnsmasq"></div>
                </td>
            </tr>
        </tfoot>
    </table>
</div>

<div id="dnsmasq-table-options-template" class="hidden ng-non-bindable">
    <div class="row">
        <div class="col-xs-4"></div>
        <div class="col-xs-4">
            <select ng-options="limit for limit in dnsmasq.limits"
                    ng-model="options.expand.limit"></select>
        </div>
        <div class="col-xs-4">
            <span class="pull-right">View <span ng-bind="records.length <= options.expand.limit ? records.length : options.expand.limit"></span> of <span ng-bind="records.length | number"></span></span>
        </div>
    </div>
</div>